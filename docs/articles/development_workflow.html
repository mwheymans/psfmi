<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="psfmi">
<title>Workflow to Develop and Validate a Prediction model in Multiply Imputed data â€¢ psfmi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Workflow to Develop and Validate a Prediction model in Multiply Imputed data">
<meta property="og:description" content="psfmi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">psfmi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/boot_MI.html">Multiple Imputation and Bootstrapping - Method boot_MI</a>
    <a class="dropdown-item" href="../articles/cv_MI.html">Multiple Imputation and Cross-validation - method cv_MI</a>
    <a class="dropdown-item" href="../articles/cv_MI_RR.html">Multiple Imputation and Cross-validation - Method cv_MI_RR</a>
    <a class="dropdown-item" href="../articles/development_workflow.html">Workflow to Develop and Validate a Prediction model in Multiply Imputed data</a>
    <a class="dropdown-item" href="../articles/MI_boot.html">Multiple Imputation and Bootstrapping - Method MI_boot</a>
    <a class="dropdown-item" href="../articles/MI_cv_naive.html">Multiple Imputation and Cross-validation - The MI_cv_naive method</a>
    <a class="dropdown-item" href="../articles/Pooling_AUC_values.html">Pooling AUC values</a>
    <a class="dropdown-item" href="../articles/Pool_Model_Performance.html">Pool Model Performance</a>
    <a class="dropdown-item" href="../articles/psfmi_CoxModels.html">Pooling and Selection of Cox Regression Models</a>
    <a class="dropdown-item" href="../articles/psfmi_LinearModels.html">Pooling and Selection of Linear Regression Models</a>
    <a class="dropdown-item" href="../articles/psfmi_LogisticModels.html">Pooling and Selection of Logistic Regression Models</a>
    <a class="dropdown-item" href="../articles/psfmi_mice.html">Working together: mice and psfmi</a>
    <a class="dropdown-item" href="../articles/psfmi_StabilityAnalysis.html">Stability analysis after Multiple Imputation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mwheymans/psfmi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Workflow to Develop and Validate a Prediction model in Multiply Imputed data</h1>
                        <h4 data-toc-skip class="author">Martijn W
Heymans</h4>
            
            <h4 data-toc-skip class="date">2022-11-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mwheymans/psfmi/blob/HEAD/vignettes/development_workflow.Rmd" class="external-link"><code>vignettes/development_workflow.Rmd</code></a></small>
      <div class="d-none name"><code>development_workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 class="unnumbered" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette shows how to develop, internally and externally
validate a (logistic) regression prediction model with <code>mice</code>
and <code>psfmi</code>.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="steps">Steps<a class="anchor" aria-label="anchor" href="#steps"></a>
</h2>
<ul>
<li><a href="#step-1---install-the-psfmi-and-mice-package">Step 1 -
Install the psfmi and mice package</a></li>
<li><a href="#step-2---impute-the-missing-data-with-mice">Step 2 -
Impute the missing data with mice</a></li>
<li><a href="#step-3---develop-the-model">Step 3 - Develop the
model</a></li>
<li><a href="#step-4---determine-model-performance">Step 4 - Determine
model performance</a></li>
<li><a href="#step-5---internally-validate-the-model">Step 5 -
Internally validate the model</a></li>
<li><a href="#step-6---shrink-pooled-coefficients-and-determine-new-intercept">Step
6 - Shrink pooled coefficients and determine new intercept</a></li>
<li><a href="#step-7---externally-validate-the-model">Step 7 -
Externally validate the model</a></li>
</ul>
<div class="section level3">
<h3 class="unnumbered" id="step-1---install-the-psfmi-and-mice-package">Step 1 - Install the psfmi and mice package<a class="anchor" aria-label="anchor" href="#step-1---install-the-psfmi-and-mice-package"></a>
</h3>
<p>You can install the released version of psfmi with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"psfmi"</span><span class="op">)</span></span></code></pre></div>
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"mwheymans/psfmi"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the released version of mice with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"mice"</span><span class="op">)</span></span></code></pre></div>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-2---impute-the-missing-data-with-mice">Step 2 - Impute the missing data with mice<a class="anchor" aria-label="anchor" href="#step-2---impute-the-missing-data-with-mice"></a>
</h3>
<p>I generated 5 imputed datasets to handle the missing values in the
lbp_orig dataset that is included in the <code>psfmi</code> package.
Depending on the amount of missing data, the number of imputed datasets
may be increased (see on-line book: <a href="https://bookdown.org/mwheymans/bookmi/multiple-imputation.html#number-of-imputed-datasets-and-iterations" class="external-link">Applied
Missing Data analysis</a>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">imp</span> <span class="op">&lt;-</span> <span class="fu">mice</span><span class="op">(</span><span class="va">lbp_orig</span>, m<span class="op">=</span><span class="fl">5</span>, maxit<span class="op">=</span><span class="fl">10</span>, seed <span class="op">=</span> <span class="fl">750</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  iter imp variable</span></span>
<span><span class="co">##   1   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   1   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   1   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   1   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   1   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   2   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   2   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   2   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   2   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   2   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   3   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   3   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   3   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   3   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   3   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   4   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   4   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   4   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   4   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   4   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   5   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   5   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   5   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   5   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   5   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   6   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   6   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   6   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   6   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   6   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   7   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   7   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   7   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   7   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   7   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   8   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   8   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   8   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   8   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   8   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   9   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   9   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   9   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   9   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   9   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   10   1  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   10   2  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   10   3  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   10   4  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span>
<span><span class="co">##   10   5  Carrying  Pain  Tampascale  Function  Radiation  Age  Satisfaction  JobControl  JobDemands  SocialSupport</span></span></code></pre>
<p>Use the <code>complete</code> function of the <code>mice</code>
package to extract the completed datasets. By setting
<code>action = "long"</code> and <code>include = FALSE</code>, the
imputed datasets are stacked under each other to form one long dataset
and the original dataset (that included missing values) is not included
in that long dataset.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">data_comp</span> <span class="op">&lt;-</span> <span class="fu">complete</span><span class="op">(</span><span class="va">imp</span>, action <span class="op">=</span> <span class="st">"long"</span>, include <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-3---develop-the-model">Step 3 - Develop the model<a class="anchor" aria-label="anchor" href="#step-3---develop-the-model"></a>
</h3>
<p>Use the <code>psfmi_lr</code> function in the <code>psfmi</code>
package to perform backward selection over the 5 multiply imputed
datasets with a p-value of 0.05 and as selection method D1.<br><strong>Note</strong> that with this function it is possible to include
cubic spline coefficients in case of non-linear relationships during
backward selection and that predictors may be forced in the model during
backward selection by including them at the setting
<code>keep.predictors</code>. When the setting <code>direction</code> is
changed to FW, forward selection is done.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">pool_lr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/psfmi_lr.html">psfmi_lr</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data_comp</span>, nimp<span class="op">=</span><span class="fl">5</span>, impvar<span class="op">=</span><span class="st">".imp"</span>, </span>
<span>              formula<span class="op">=</span><span class="va">Chronic</span> <span class="op">~</span> <span class="va">Gender</span> <span class="op">+</span> <span class="va">Age</span> <span class="op">+</span> <span class="va">JobControl</span> <span class="op">+</span> <span class="va">Tampascale</span> <span class="op">+</span> </span>
<span>              <span class="va">Pain</span> <span class="op">+</span> <span class="va">Radiation</span> <span class="op">+</span> <span class="va">JobDemands</span> <span class="op">+</span> <span class="va">SocialSupport</span> <span class="op">+</span> <span class="va">Smoking</span> <span class="op">+</span> </span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Satisfaction</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Carrying</span><span class="op">)</span> <span class="op">+</span> <span class="fu">rcs</span><span class="op">(</span><span class="va">Function</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>              keep.predictors <span class="op">=</span> <span class="st">"Radiation"</span>, </span>
<span>              p.crit <span class="op">=</span> <span class="fl">0.157</span>, method<span class="op">=</span><span class="st">"D1"</span>, direction <span class="op">=</span> <span class="st">"BW"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Removed at Step 1 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - rcs(Function,3)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">pool_lr</span><span class="op">$</span><span class="va">RR_model_final</span></span></code></pre></div>
<pre><code><span><span class="co">## $`Step 9`</span></span>
<span><span class="co">##                    term   estimate std.error  statistic        df      p.value</span></span>
<span><span class="co">## 1           (Intercept) -5.6290593 1.1754061 -4.7890336  39.95530 2.318419e-05</span></span>
<span><span class="co">## 2                  Pain  0.9354091 0.1851492  5.0521901  67.68397 3.532584e-06</span></span>
<span><span class="co">## 3             Radiation  0.5186631 0.5151459  1.0068276  91.48901 3.166731e-01</span></span>
<span><span class="co">## 4 factor(Satisfaction)2 -0.4282950 0.6531511 -0.6557364  44.49919 5.153699e-01</span></span>
<span><span class="co">## 5 factor(Satisfaction)3 -2.6431297 0.9429219 -2.8031270  26.83928 9.283867e-03</span></span>
<span><span class="co">## 6     factor(Carrying)2  1.2554087 0.6254666  2.0071556  78.40085 4.817958e-02</span></span>
<span><span class="co">## 7     factor(Carrying)3  1.6871723 0.6473849  2.6061349 115.47451 1.036350e-02</span></span>
<span><span class="co">##            OR    lower.EXP  upper.EXP</span></span>
<span><span class="co">## 1 0.003591953 0.0003338808  0.0386429</span></span>
<span><span class="co">## 2 2.548255652 1.7610642412  3.6873197</span></span>
<span><span class="co">## 3 1.679780430 0.6037849102  4.6732905</span></span>
<span><span class="co">## 4 0.651619185 0.1747816872  2.4293596</span></span>
<span><span class="co">## 5 0.071138280 0.0102714430  0.4926917</span></span>
<span><span class="co">## 6 3.509272384 1.0103539396 12.1887907</span></span>
<span><span class="co">## 7 5.404177760 1.4991278521 19.4814186</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">pool_lr</span><span class="op">$</span><span class="va">multiparm_final</span></span></code></pre></div>
<pre><code><span><span class="co">## $`Step 9`</span></span>
<span><span class="co">##                       p-values D1 F-statistic</span></span>
<span><span class="co">## Pain                 1.275830e-06   25.524625</span></span>
<span><span class="co">## Radiation            3.148421e-01    1.013702</span></span>
<span><span class="co">## factor(Satisfaction) 2.426042e-02    4.267156</span></span>
<span><span class="co">## factor(Carrying)     3.261509e-02    3.483376</span></span></code></pre>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-4---determine-model-performance">Step 4 - Determine model performance<a class="anchor" aria-label="anchor" href="#step-4---determine-model-performance"></a>
</h3>
<p>The performance of the model selected at step 3 can be determined by
using the <code>pool_performance</code> function.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">perf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pool_performance.html">pool_performance</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data_comp</span>, nimp<span class="op">=</span><span class="fl">5</span>, impvar<span class="op">=</span><span class="st">".imp"</span>, </span>
<span>    formula <span class="op">=</span> <span class="va">pool_lr</span><span class="op">$</span><span class="va">formula_final</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, </span>
<span>    cal.plot<span class="op">=</span><span class="cn">TRUE</span>, plot.method<span class="op">=</span><span class="st">"mean"</span>, groups_cal <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="development_workflow_files/figure-html/plot-1.png" width="480"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">perf</span></span></code></pre></div>
<pre><code><span><span class="co">## $ROC_pooled</span></span>
<span><span class="co">##                     95% Low C-statistic 95% Up</span></span>
<span><span class="co">## C-statistic (logit)  0.8144      0.8978 0.9462</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $coef_pooled</span></span>
<span><span class="co">##           (Intercept)                  Pain             Radiation </span></span>
<span><span class="co">##            -5.6290593             0.9354091             0.5186631 </span></span>
<span><span class="co">## factor(Satisfaction)2 factor(Satisfaction)3     factor(Carrying)2 </span></span>
<span><span class="co">##            -0.4282950            -2.6431297             1.2554087 </span></span>
<span><span class="co">##     factor(Carrying)3 </span></span>
<span><span class="co">##             1.6871723 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $R2_pooled</span></span>
<span><span class="co">## [1] 0.5842591</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $Brier_Scaled_pooled</span></span>
<span><span class="co">## [1] 0.4882759</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $nimp</span></span>
<span><span class="co">## [1] 5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $HLtest_pooled</span></span>
<span><span class="co">##        F_value     P(&gt;F) df1      df2</span></span>
<span><span class="co">## [1,] 0.7163405 0.6758435   8 42.87152</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $model_type</span></span>
<span><span class="co">## [1] "binomial"</span></span></code></pre>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-5---internally-validate-the-model">Step 5 - Internally validate the model<a class="anchor" aria-label="anchor" href="#step-5---internally-validate-the-model"></a>
</h3>
<p>To internally validate the model we use the
<code>psfmi_validate</code> function. With this function five different
methods can be used to internally validate models in MI data <a href="https://mwheymans.github.io/psfmi/articles/">see these
Vignettes</a>, Three methods use cross-validation and two bootstrapping
in combination with MI.</p>
<p>We will use cross-validation and more specific the method <a href="https://mwheymans.github.io/psfmi/articles/cv_MI_RR.html">cv_MI_RR</a>.
With this method it is possible to integrate backward selection into the
cross-validation procedure. The last model that is selected by the
psfmi_lr function is internally validated. So, if we want to apply
backward selection during cross-validation from the full model we first
have to apply the psfmi_lr function without variable selection. That is
what we apply here, because we know that variable selection is one of
the main reasons that prediction models are over-fitted.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">pool_val</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/psfmi_lr.html">psfmi_lr</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data_comp</span>, formula <span class="op">=</span> <span class="va">Chronic</span> <span class="op">~</span> <span class="va">Gender</span> <span class="op">+</span> <span class="va">Age</span> <span class="op">+</span> <span class="va">JobControl</span> <span class="op">+</span> <span class="va">Tampascale</span> <span class="op">+</span> </span>
<span>                      <span class="va">Pain</span> <span class="op">+</span> <span class="va">Radiation</span> <span class="op">+</span> <span class="va">JobDemands</span> <span class="op">+</span> <span class="va">SocialSupport</span> <span class="op">+</span> <span class="va">Smoking</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Satisfaction</span><span class="op">)</span> <span class="op">+</span> </span>
<span>                      <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Carrying</span><span class="op">)</span> <span class="op">+</span> <span class="fu">rcs</span><span class="op">(</span><span class="va">Function</span>, <span class="fl">3</span><span class="op">)</span>, p.crit <span class="op">=</span> <span class="fl">1</span>, direction<span class="op">=</span><span class="st">"BW"</span>,</span>
<span>                      nimp<span class="op">=</span><span class="fl">5</span>, impvar<span class="op">=</span><span class="st">".imp"</span>, method<span class="op">=</span><span class="st">"D1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span></span>
<span>  <span class="va">res_cv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/psfmi_validate.html">psfmi_validate</a></span><span class="op">(</span><span class="va">pool_val</span>, val_method <span class="op">=</span> <span class="st">"cv_MI_RR"</span>, data_orig <span class="op">=</span> <span class="va">lbp_orig</span>, folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                     p.crit<span class="op">=</span><span class="fl">0.05</span>, BW<span class="op">=</span><span class="cn">TRUE</span>, nimp_mice <span class="op">=</span> <span class="fl">10</span>, miceImp <span class="op">=</span> <span class="va">miceImp</span>, printFlag <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## fold 1</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 1 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - rcs(Function,3)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 9 is - Radiation</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 10 is - factor(Carrying)</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## fold 2</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 1 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - rcs(Function,3)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - Radiation</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 9 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 10 is - factor(Carrying)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 11 is - factor(Satisfaction)</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## fold 3</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 1 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - rcs(Function,3)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 9 is - Radiation</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## fold 4</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 1 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Radiation</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - factor(Carrying)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 9 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## fold 5</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 1 is - JobDemands</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 2 is - Gender</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 3 is - Smoking</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 4 is - Radiation</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 5 is - Tampascale</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 6 is - rcs(Function,3)</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 7 is - Age</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 8 is - SocialSupport</span></span></code></pre>
<pre><code><span><span class="co">## Removed at Step 9 is - JobControl</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Selection correctly terminated, </span></span>
<span><span class="co">## No more variables removed from the model</span></span></code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_cv</span></span></code></pre></div>
<pre><code><span><span class="co">## $stats</span></span>
<span><span class="co">##                  Train      Test</span></span>
<span><span class="co">## AUC          0.8916129 0.8410027</span></span>
<span><span class="co">## Brier scaled 0.4737013 0.3051174</span></span>
<span><span class="co">## Rsq          0.5631277 0.4927999</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $slope</span></span>
<span><span class="co">##  Intercept      Slope </span></span>
<span><span class="co">## -0.0943762  0.8374978</span></span></code></pre>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-6---shrink-pooled-coefficients-and-determine-new-intercept">Step 6 - Shrink pooled coefficients and determine
new intercept<a class="anchor" aria-label="anchor" href="#step-6---shrink-pooled-coefficients-and-determine-new-intercept"></a>
</h3>
<p>We can use the slope value of 0.8449148 that was estimated at the
previous step as a shrinkage factor to prevent our model from being
overfitted in new data. We do this by multiplying the pooled
coefficients with the shrinkage factor and also to determine a new
intercept value that is aligned with the shrunken coefficients.</p>
<p>We use the <code>pool_intadj</code> function for this that will
provide the adjusted coefficients and new intercept value.</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">pool_select</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/psfmi_lr.html">psfmi_lr</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">data_comp</span>, nimp<span class="op">=</span><span class="fl">5</span>, impvar<span class="op">=</span><span class="st">".imp"</span>, </span>
<span>  formula <span class="op">=</span> <span class="va">pool_lr</span><span class="op">$</span><span class="va">formula_final</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,  </span>
<span>  p.crit <span class="op">=</span> <span class="fl">1</span>, method<span class="op">=</span><span class="st">"D1"</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pool_intadj.html">pool_intadj</a></span><span class="op">(</span><span class="va">pool_select</span>, shrinkage_factor <span class="op">=</span> <span class="fl">0.8449148</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">res</span><span class="op">$</span><span class="va">int_adj</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] -4.795145</span></span></code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res</span><span class="op">$</span><span class="va">coef_shrink_pooled</span></span></code></pre></div>
<pre><code><span><span class="co">##                  Pain             Radiation factor(Satisfaction)2 </span></span>
<span><span class="co">##             0.7903410             0.4382261            -0.3618728 </span></span>
<span><span class="co">## factor(Satisfaction)3     factor(Carrying)2     factor(Carrying)3 </span></span>
<span><span class="co">##            -2.2332194             1.0607134             1.4255169</span></span></code></pre>
<p>The last step is to externally validate this adjusted model.</p>
<p>Back to <a href="#steps">Steps</a></p>
</div>
<div class="section level3">
<h3 class="unnumbered" id="step-7---externally-validate-the-model">Step 7 - Externally validate the model<a class="anchor" aria-label="anchor" href="#step-7---externally-validate-the-model"></a>
</h3>
<p>We validate the model in an external dataset that is imputed five
times due to missing data.</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_extval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mivalext_lr.html">mivalext_lr</a></span><span class="op">(</span>data.val <span class="op">=</span> <span class="va">lbpmi_extval</span>, nimp <span class="op">=</span> <span class="fl">5</span>, impvar <span class="op">=</span> <span class="st">"Impnr"</span>,</span>
<span>    formula <span class="op">=</span> <span class="va">pool_lr</span><span class="op">$</span><span class="va">formula_final</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, lp.orig <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">int_adj</span>, </span>
<span>    <span class="va">res</span><span class="op">$</span><span class="va">coef_shrink_pooled</span><span class="op">)</span>, cal.plot <span class="op">=</span> <span class="cn">TRUE</span>, plot.method <span class="op">=</span> <span class="st">"mean"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Pooled performance measures over m = 5 imputed external validation datasets</span></span>
<span><span class="co">##             correctly estimated</span></span></code></pre>
<p><img src="development_workflow_files/figure-html/plot2-1.png" width="480"></p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_extval</span><span class="op">$</span><span class="va">calibrate</span>  </span></code></pre></div>
<pre><code><span><span class="co">##                       Estimate   95% CI L  95% CI U     P-val</span></span>
<span><span class="co">## pooled_int          -0.0181209 -0.6784875 0.6422456 0.9558473</span></span>
<span><span class="co">## pooled_slope         0.8874083  0.4876581 1.2871584 0.0000330</span></span>
<span><span class="co">## pooled_offset_int   -0.0384294 -0.7557575 0.6788988 0.9130785</span></span>
<span><span class="co">## pooled_offset_slope -0.1125917 -0.5123419 0.2871584 0.5763256</span></span></code></pre>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_extval</span><span class="op">$</span><span class="va">ROC</span></span></code></pre></div>
<pre><code><span><span class="co">##                     95% Low C-statistic 95% Up</span></span>
<span><span class="co">## C-statistic (logit)  0.7382      0.8482 0.9172</span></span></code></pre>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_extval</span><span class="op">$</span><span class="va">R2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.45587</span></span></code></pre>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">res_extval</span><span class="op">$</span><span class="va">HLtest</span></span></code></pre></div>
<pre><code><span><span class="co">##      F_value   P(&gt;F) df1       df2</span></span>
<span><span class="co">## [1,] 0.10593 0.99904   8 710741622</span></span></code></pre>
<p>Under calibrate information is provided about
<code>pooled_int</code>, <code>pooled_slope</code>,
<code>pooled_offset_int</code> and <code>pooled_offset_slope</code>. The
<code>pooled_int</code> and <code>pooled_slope</code> gives information
about the pooled linear predictor (LP), after the LP is freely estimated
in each external imputed dataset (provides information about
miscalibration in intercept and slope). The
<code>pooled_offset_int</code> and <code>pooled_offset_slope</code> give
information about miscalibration in intercept and slope separately by
using an offset procedure (see Steyerberg, p.Â 300). We see that in the
external dataset the slope has a value of 0.88741 and slightly deviates
from the value of 1, which means that the coefficient values slightly
differ between the development and external dataset. The
<code>pooled_offset_int</code> and <code>pooled_offset_slope</code> are
not significant, which means that the deviation in intercept and slope
are not significant in the external dataset (be aware that the p-value
has to be interpreted with care). Also see that the deviation in the
slope under <code>pooled_offset_slope</code> of -0.1125917 is exactly
equal to the difference from 1 of the pooled_slope, i.e.Â 1-0.1125917 =
0.8874083 (the intercept value of this model is equal to the value under
<code>pooled_int</code>). the AUC is 0.8482 and the R-squared 0.45587.
The Hosmer and Lemeshow test has a p-value of 0.67820 (interprete with
care also), which means that the fit is satisfactory. This is also
confirmed by the calibration plot where the calibration curves averaged
across multiply imputed datasets is near the optimal (dashed) line.</p>
<p>Back to <a href="#steps">Steps</a></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martijn Heymans.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
