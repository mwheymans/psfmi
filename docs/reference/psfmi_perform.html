<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Internal validation and performance of logistic prediction models across Multiply Imputed datasets — psfmi_perform • psfmi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Internal validation and performance of logistic prediction models across Multiply Imputed datasets — psfmi_perform"><meta property="og:description" content="psfmi_perform Evaluate Performance of logistic regression models selected with
 the psfmi_lr function of the psfmi package by using cross-validation
 or bootstrapping."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psfmi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Pooling_AUC_values.html">Pooling AUC values</a>
    </li>
    <li>
      <a href="../articles/Pool_Model_Performance.html">Pool Model Performance</a>
    </li>
    <li>
      <a href="../articles/psfmi_CoxModels.html">Pooling and Selection of Cox Regression Models</a>
    </li>
    <li>
      <a href="../articles/psfmi_LinearModels.html">Pooling and Selection of Linear Regression Models</a>
    </li>
    <li>
      <a href="../articles/psfmi_LogisticModels.html">Pooling and Selection of Logistic Regression Models</a>
    </li>
    <li>
      <a href="../articles/psfmi_mice.html">Working together: mice and psfmi</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mwheymans/psfmi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Internal validation and performance of logistic prediction models across Multiply Imputed datasets</h1>
    <small class="dont-index">Source: <a href="https://github.com/mwheymans/psfmi/blob/HEAD/R/psfmi_perform.R" class="external-link"><code>R/psfmi_perform.R</code></a></small>
    <div class="hidden name"><code>psfmi_perform.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>psfmi_perform</code> Evaluate Performance of logistic regression models selected with
 the <code>psfmi_lr</code> function of the <code>psfmi</code> package by using cross-validation
 or bootstrapping.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">psfmi_perform</span><span class="op">(</span></span>
<span>  <span class="va">pobj</span>,</span>
<span>  val_method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_orig <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  int_val <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nboot <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  folds <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  nimp_cv <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  nimp_mice <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  p.crit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  BW <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  direction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cv_naive_appt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cal.plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot.method <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  groups_cal <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  <span class="va">miceImp</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>pobj</dt>
<dd><p>An object of class <code>pmods</code> (pooled models), produced by a previous
call to <code>psfmi_lr</code>.</p></dd>


<dt>val_method</dt>
<dd><p>Method for internal validation. MI_boot for first Multiple Imputation and
than bootstrapping in each imputed dataset and boot_MI for first bootstrapping and than
multiple imputation in each bootstrap sample, and cv_MI, cv_MI_RR and
MI_cv_naive for the combinations of cross-validation and multiple imputation.
To use cv_MI, cv_MI_RR and boot_MI, data_orig has to be specified. See details for more information.</p></dd>


<dt>data_orig</dt>
<dd><p>dataframe of original dataset that contains missing data for methods
cv_MI, cv_MI_RR and boot_MI.</p></dd>


<dt>int_val</dt>
<dd><p>If TRUE internal validation is conducted using bootstrapping or cross-validation.
Default is TRUE. If FALSE only apparent performance measures are calculated.</p></dd>


<dt>nboot</dt>
<dd><p>The number of bootstrap resamples, default is 10. Used for methods boot_MI and MI_boot.</p></dd>


<dt>folds</dt>
<dd><p>The number of folds, default is 3. Used for methods cv_MI, cv_MI_RR and MI_cv_naive.</p></dd>


<dt>nimp_cv</dt>
<dd><p>Numerical scalar. Number of (multiple) imputation runs for method cv_MI.</p></dd>


<dt>nimp_mice</dt>
<dd><p>Numerical scalar. Number of imputed datasets for method cv_MI_RR and boot_MI.
When not defined, the number of multiply imputed datasets is used of the
previous call to the function <code>psfmi_lr</code>.</p></dd>


<dt>p.crit</dt>
<dd><p>A numerical scalar. P-value selection criterium used for backward or forward
selection during validation. When set at 1, pooling and internal validation is done without
backward selection.</p></dd>


<dt>BW</dt>
<dd><p>Only used for methods cv_MI, cv_MI_RR and MI_cv_naive. If TRUE backward selection is
conducted within cross-validation. Default is FALSE.</p></dd>


<dt>direction</dt>
<dd><p>Can be used together with val_methods boot_MI and MI_boot. The direction of
predictor selection, "BW" is for backward selection and "FW" for forward selection.</p></dd>


<dt>cv_naive_appt</dt>
<dd><p>Can be used in combination with val_method MI_cv_naive. Default is TRUE for
showing the cross-validation apparent (train) and test results. Set to FALSE to only give test results.</p></dd>


<dt>cal.plot</dt>
<dd><p>If TRUE a calibration plot is generated. Default is FALSE. Can be used in combination
with int_val = FALSE.</p></dd>


<dt>plot.method</dt>
<dd><p>If "mean" one calibration plot is generated, first taking the 
mean of the linear predictor across the multiply imputed datasets (default), if 
"individual" the calibration plot of each imputed dataset is plotted, 
if "overlay" calibration plots from each imputed datasets are plotted in one figure.</p></dd>


<dt>groups_cal</dt>
<dd><p>A numerical scalar. Number of groups used on the calibration plot and. 
for the Hosmer and Lemeshow test. Default is 10. If the range of predicted probabilities. 
is low, less than 10 groups can be chosen, but not &lt; 3.</p></dd>


<dt>miceImp</dt>
<dd><p>Wrapper function around the <code>mice</code> function.</p></dd>


<dt>...</dt>
<dd><p>Arguments as predictorMatrix, seed, maxit, etc that can be adjusted for
the <code>mice</code> function. To be used in combination with validation methods cv_MI,
cv_MI_RR and MI_boot. For method cv_MI the number of imputed datasets is fixed at 1 and cannot
be changed.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>psfmi_perform</code> object from which the following objects can be extracted: <code>res_boot</code>,
 result of pooled performance (in multiply imputed datasets) at each bootstrap step of ROC app (pooled
 ROC), ROC test (pooled ROC after bootstrap model is applied in original multiply imputed datasets),
 same for R2 app (Nagelkerke's R2), R2 test, Scaled Brier app and Scaled Brier test. Information is also provided
 about testing the Calibration slope at each bootstrap step as interc test and Slope test.
 The performance measures are pooled by a call to the function <code>pool_performance</code>. Another
 object that can be extracted is <code>intval</code>, with information of the AUC, R2, Scaled Brier score and
 Calibration slope averaged over the bootstrap samples, in terms of: Orig (original datasets),
 Apparent (models applied in bootstrap samples), Test (bootstrap models are applied in original datasets),
 Optimism (difference between apparent and test) and Corrected (original corrected for optimism).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For internal validation five methods can be used, cv_MI, cv_MI_RR, MI_cv_naive,
 MI_boot and boot_MI. Method cv_MI uses imputation within each cross-validation fold definition.
 By repeating this in several imputation runs, multiply imputed datasets are generated. Method
 cv_MI_RR uses multiple imputation within the cross-validation definition. MI_cv_naive, applies
 cross-validation within each imputed dataset. MI_boot draws for each bootstrap step the same
 cases in all imputed datasets. With boot_MI first bootstrap samples are drawn from the original
 dataset with missing values and than multiple imputation is applied. For multiple imputation
 the <code>mice</code> function from the <code>mice</code> package is used. It is recommended to use a minumum
 of 100 imputation runs for method cv_MI or 100 bootstrap samples for method boot_MI or MI_boot.
 Methods cv_MI, cv_MI_RR and MI_cv_naive can be combined with backward selection during
 cross-validation and with methods boot_MI and MI_boot, backward and forward selection can
 be used. For methods cv_MI and cv_MI_RR the outcome in the original dataset has to be complete.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Heymans MW, van Buuren S, Knol DL, van Mechelen W, de Vet HC. Variable selection under
 multiple imputation using the bootstrap in a prognostic study. BMC Med Res Methodol. 2007(13);7:33.</p>
<p>F. Harrell. Regression Modeling Strategies. With Applications to
 Linear Models, Logistic and Ordinal Regression, and Survival Analysis (2nd edition). Springer,
 New York, NY, 2015.</p>
<p>Van Buuren S. (2018). Flexible Imputation of Missing Data. 2nd Edition. Chapman &amp;
 Hall/CRC Interdisciplinary Statistics. Boca Raton.</p>
<p>Harel, O. (2009). The estimation of R2 and adjusted R2 in
 incomplete data sets using multiple imputation. Journal of Applied Statistics,
 36(10), 1109-1118.</p>
<p>Musoro JZ, Zwinderman AH, Puhan MA, ter Riet G, Geskus RB. Validation of prediction
 models based on lasso regression with multiply imputed data. BMC Med Res Methodol. 2014;14:116.</p>
<p>Wahl S, Boulesteix AL, Zierer A, Thorand B, van de Wiel MA. Assessment of
 predictive performance in incomplete data by combining internal validation and multiple
 imputation. BMC Med Res Methodol. 2016;16(1):144.</p>
<p>EW. Steyerberg (2019). Clinical Prediction MOdels. A Practical Approach
 to Development, Validation, and Updating (2nd edition). Springer Nature Switzerland AG.</p>
<p>http://missingdatasolutions.rbind.io/</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Martijn Heymans, 2020</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martijn Heymans.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

